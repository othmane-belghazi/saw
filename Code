# üìå Probl√®me d'Optimisation de Majoration Tarifaire avec Fonction Sigmo√Øde

## üéØ Objectif

Trouver les **param√®tres optimaux** d'une fonction de majoration tarifaire bas√©e sur les segments de **conversion** et **risque** des activit√©s, afin que la **majoration moyenne pond√©r√©e** des activit√©s soit **aussi proche que possible d'une cible m√©tier fix√©e**.

---

## ‚öôÔ∏è Donn√©es disponibles

Chaque activit√© \( k \in \{1, ..., N\} \) est d√©crite par :

- \( i_k \in \{1, ..., 10\} \) : segment de **conversion**
- \( j_k \in \{1, ..., 20\} \) : segment de **risque**
- \( P_k \in \mathbb{R}^+ \) : **prix** ou montant associ√© √† l‚Äôactivit√©
- \( ELR_k \in [0, 1] \) : taux de sinistralit√© observ√© (facultatif, pour contrainte)
- \( TC_k \in [0, 1] \) : taux de conversion observ√© (facultatif, pour contrainte)

---

## üßÆ Formule de la majoration

On mod√©lise la **majoration multiplicative** \( M_k \) de l‚Äôactivit√© \( k \) par une **fonction sigmo√Øde crois√©e** :

\[
M_k = 1 + M_{\max} \cdot \sigma\left(a \cdot (i_k - c_i)\right) \cdot \sigma\left(b \cdot (j_k - c_j)\right)
\]

o√π :

- \( \sigma(x) = \frac{1}{1 + e^{-x}} \) est la fonction sigmo√Øde
- \( a, b \in \mathbb{R}^+ \) : contr√¥lent la pente de la croissance sur conversion et risque
- \( c_i \in [1, 10], c_j \in [1, 20] \) : seuils de d√©clenchement des majorations
- \( M_{\max} \in \mathbb{R}^+ \) : majoration maximale autoris√©e (ex. 7% ‚Üí 0.07)

---

## üìà Majoration moyenne pond√©r√©e

La **majoration moyenne observ√©e** est calcul√©e par :

\[
\text{Majoration moyenne} = \left( \frac{\sum_{k=1}^N M_k \cdot P_k}{\sum_{k=1}^N P_k} \right) - 1
\]

---

## ‚úÖ Probl√®me d'optimisation

### But :
Minimiser l'√©cart entre la **majoration moyenne** et une **majoration cible** \( M_{\text{cible}} \)

\[
\min_{a, b, c_i, c_j} \left( \left( \frac{\sum_{k=1}^N M_k \cdot P_k}{\sum_{k=1}^N P_k} \right) - 1 - M_{\text{cible}} \right)^2
\]

### Sous contraintes :

- \( a, b \geq 0 \)
- \( c_i \in [1, 10], \quad c_j \in [1, 20] \)
- \( M_k \in [1, 1 + M_{\max}] \quad \forall k \)

### (Optionnel) Contraintes m√©tier locales par activit√© :

- \( ELR^{\text{proj}}_k = ELR_k \cdot M_k \leq ELR_k \cdot (1 + \epsilon_{elr}) \)
- \( TC^{\text{proj}}_k = TC_k / M_k \geq TC_k \cdot (1 - \epsilon_{tc}) \)

avec \( \epsilon_{elr}, \epsilon_{tc} \) des marges acceptables d√©finies par le m√©tier.

---

## üß† Interpr√©tation des param√®tres

| Param√®tre | R√¥le | Interpr√©tation m√©tier |
|-----------|------|------------------------|
| \( a \) | pente sur conversion | Plus \( a \) est grand, plus la majoration r√©agit rapidement aux segments de conversion |
| \( b \) | pente sur risque | Plus \( b \) est grand, plus on p√©nalise vite les segments de risque |
| \( c_i \) | centre de la sigmo√Øde conversion | Segment de conversion √† partir duquel on commence √† majorer significativement |
| \( c_j \) | centre de la sigmo√Øde risque | Segment de risque √† partir duquel on commence √† majorer significativement |
| \( M_{\max} \) | plafond | Niveau maximal de majoration autoris√© (ex. 7%) |

---

## üìå √Ä impl√©menter ensuite

- G√©n√©ration de donn√©es al√©atoires simul√©es ou chargement r√©el
- Impl√©mentation de la fonction de co√ªt
- Optimisation (ex : `scipy.optimize.minimize`)
- Visualisation des majorations (heatmap ou 3D)
